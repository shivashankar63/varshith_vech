:root{--bg:#0c0f14;--panel:#121722;--muted:#9aa4b2;--accent:#3b82f6;--accent-2:#22c55e;--danger:#ef4444;--text:#e5e7eb;--border:#1f2a37}
:root.light{--bg:#f7fafc;--panel:#ffffff;--muted:#4b5563;--accent:#2563eb;--accent-2:#16a34a;--danger:#dc2626;--text:#111827;--border:#e5e7eb}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text);transition:background .3s ease,color .3s ease}

.app-header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--border);background:linear-gradient(180deg,#0f1420,#0b1018)}
.brand{display:flex;gap:10px;align-items:center}
.brand h1{font-size:18px;margin:0;font-weight:700}
.brand-icon{width:28px;height:28px;filter:invert(1) opacity(.9)}
.header-actions{display:flex;gap:8px}

.layout{display:grid;grid-template-columns:340px 1fr;height:calc(100% - 58px)}
.sidebar{height:100%;overflow:auto;border-right:1px solid var(--border);background:#0e1420;padding:12px 12px 80px}
.map-wrap{position:relative;border-radius:12px;overflow:hidden;box-shadow:inset 0 0 0 1px var(--border)}
.map{height:100%;width:100%}

.card{background:var(--panel);border:1px solid var(--border);border-radius:10px;padding:12px;margin:10px 0}
.card h2{font-size:14px;margin:0 0 8px;color:#d1d5db}
.field{display:flex;flex-direction:column;gap:6px;margin:8px 0}
.field label{font-size:12px;color:var(--muted)}
select,textarea{background:#0b1220;color:var(--text);border:1px solid var(--border);padding:8px;border-radius:8px}

.btn{border:1px solid var(--border);background:#111827;color:var(--text);padding:8px 10px;border-radius:8px;cursor:pointer}
.btn:hover{border-color:#2b3b52}
.btn-ghost{background:transparent}
.btn-danger{background:var(--danger);border-color:transparent;color:white}
 .btn[disabled]{opacity:.6;cursor:not-allowed}

/* Skeleton loaders */
.skeleton{background:linear-gradient(90deg, rgba(255,255,255,0.06) 25%, rgba(255,255,255,0.12) 37%, rgba(255,255,255,0.06) 63%); background-size:400% 100%; animation:skeleton 1.4s ease infinite; border-radius:8px}
.light .skeleton{background:linear-gradient(90deg, rgba(0,0,0,0.06) 25%, rgba(0,0,0,0.08) 37%, rgba(0,0,0,0.06) 63%)}
@keyframes skeleton { 0%{background-position:100% 0} 100%{background-position:0 0} }

.toggles{display:flex;flex-direction:column;gap:8px;margin-top:8px}
.toggle{display:flex;align-items:center;gap:8px;color:#d1d5db;font-size:13px}

.list div{margin:4px 0}
.stops{display:flex;flex-direction:column;gap:6px}
.stop{display:flex;align-items:center;justify-content:space-between;padding:8px;border-radius:8px;background:#0b1220;border:1px solid var(--border)}
.stop .eta{color:var(--accent-2);font-weight:600}

.app-footer{margin-top:12px;padding:8px 4px;color:var(--muted);text-align:center;font-size:12px}

.bus-bar{position:absolute;left:12px;right:12px;bottom:12px;display:flex;gap:16px;align-items:center;background:rgba(12,15,20,.9);backdrop-filter:blur(6px);border:1px solid var(--border);border-radius:12px;padding:10px}
.bar-section .label{color:var(--muted);margin-right:6px}

.modal{border:none;padding:0;background:transparent}
.modal::backdrop{background:rgba(0,0,0,.55)}
.modal-card{width:min(520px,92vw);background:var(--panel);border:1px solid var(--border);border-radius:12px}
.modal-card header{padding:12px 14px;border-bottom:1px solid var(--border)}
.modal-body{padding:12px 14px}
.modal-actions{display:flex;gap:8px;justify-content:flex-end;padding:12px 14px;border-top:1px solid var(--border)}

.toast{position:fixed;right:16px;bottom:16px;background:#0b1220;padding:10px 12px;border:1px solid var(--border);border-radius:10px;opacity:0;transform:translateY(10px);transition:all .25s ease;color:#e5e7eb}
.toast.show{opacity:1;transform:translateY(0)}
 .light .toast{background:#ffffff;color:#111827;border-color:#e5e7eb}

/* Accessibility and focus */
:focus{outline:2px solid var(--accent); outline-offset:2px}
.toggle input{accent-color:var(--accent)}

@media (max-width: 980px){
  .layout{grid-template-columns:1fr}
  .sidebar{order:2}
  .map-wrap{order:1;height:60vh}
}

@media (max-width: 768px){
  .app-header{flex-wrap:wrap;padding:10px 12px}
  .brand h1{font-size:16px}
  .brand-icon{width:24px;height:24px}
  .header-actions{width:100%;justify-content:center;gap:6px;margin-top:8px}
  .btn{padding:6px 10px;font-size:13px}
  .layout{grid-template-columns:1fr;height:auto}
  .sidebar{border-right:none;border-bottom:1px solid var(--border);max-height:50vh;padding:10px}
  .map-wrap{height:400px;min-height:300px}
  .card{padding:10px;margin:8px 0}
  .card h2{font-size:13px}
  .modal-card{width:95vw}
  .bus-bar{flex-direction:column;align-items:flex-start !important;gap:8px !important;padding:8px;left:8px;right:8px;bottom:8px}
  .bar-section{width:100%}
}
